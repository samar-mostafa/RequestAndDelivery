@model FilterRequestsViewModel
<div class="container mt-5 pt-5" dir="rtl" lang="ar">
    <div class="ReqsFilterH1">
        <h1>فلتر الطلبات</h1>
    </div>
    <form >
        <div class="row m-5">

            <div class="col-md-4 mb-4 ">
                <h5>أختر الفرع</h5>
                <select asp-items="@ViewBag.Branches" class="form-select  " onchange="getBranchDepartments(this.value,'#Departments2')"
                        asp-for="BranchId">
                    <option selected value="">أختر الفرع</option>
                </select>
            </div>

            <div class="col-md-4 mb-4">

                <h5 class="fs-4">أختر الإداره</h5>
                <select class="form-select  " id="Departments2" asp-for="DepartmentId">
                    <option selected value="">أختر الاداره</option>
                </select>
            </div>
            <div class="col-md-4 mb-4">
                <h5>أختر نوع الجهاز</h5>
                <select class="form-select js-select2Single" asp-for="DeviceTypeId" asp-items="@ViewBag.DeviceTypes">
                    <option selected value="">أختر نوع الجهاز</option>
                </select>
            </div>
            <div class="col-md-4 mb-4 offset-md-3">
                <h5>رقم الصادر</h5>
                <input class="form-control fs-5" asp-for="ExportNumber" />
                       
                
            </div>
            <div class="custom-control custom-checkbox col-md-4 mb-4 ">
                <input type="checkbox" class="custom-control-input fs-5" id="customCheck1" asp-for="IsDeliverd">
                <label class="custom-control-label" for="customCheck1">تم التسليم</label>
            </div>
            <div class="col-md-4 mb-4 offset-md-3">
                <h5>رقم تليفون الموظف</h5>
                <input class="form-control fs-5" asp-for="EmployeeId" />


            </div>
            <div class="col-md-4 mb-4 ">
                <h5>اسم الموظف</h5>
                <input class="form-control fs-5" asp-for="ExportNumber" />


            </div>
            <div class="col-md-4 mb-4 offset-md-3">
                <h5>التاريخ من</h5>
                <input asp-for=DateFrom class="form-control fs-5" id="DateFrom" type="date" />
            </div>
            <div class="col-md-4 mb-4">
                <h5> التاريخ إلي</h5>
                <input asp-for=DateTo class="form-control fs-5" id="DateTo" type="date" />
            </div>
            <div class="col-md-5 m-auto mt-5">
                <button type="button" onclick="resetToDefault()" class="btn btn-info fs-6 m-auto">إعاده تشغيل</button>
                <button type="button" onclick="getFilteredInks()" class="btn btn-primary w-50 fs-6 ">إبحث</button>
            </div>
           
        </div>

       
    </form>
    <div class="ReqFilterTableH1">
        <h1 class=" mb-3">نتيجه البحث</h1>
    </div>
   
        <table id="RequestTable" class="table table-striped table-bordered dt-responsive nowrap" dir="rtl" lang="ar">

            <thead>
                <tr>
                <th class="text-center">نوع الجهاز</th>
                <th class="text-center">تاريخ الطلب</th>
                <th class="text-center">رقم الصادر</th>
                <th class="text-center">تم التسليم</th>
                <th class="text-center">اسم الموظف</th>
                <th class="text-center">رقم تليفون الموظف</th>
                <th class="text-center">الفرع</th>
                <th class="text-center">الإداره</th>
                </tr>
            </thead>
            <tbody id="tBody"> </tbody>

        </table>
 
</div>

        @section Scripts{
            <script>
        function resetToDefault() {
            window.location.reload();
        }

        function getBranchDepartments(id, dep) {

            $.get({
                url: "/Requests/GetBranchDepartments/" + id,
                success: function (data) {
                    var html = "<option value=0 selected>أختر الاداره</option>";
                    $.each(data, function (key, value) {
                        html += `<option value=${value.id}>${value.name}</option>`;
                        $(dep).html(html);
                    })

                }
            })

        }

            </script>
        }